## Видео с конференций

[**Станислав Рождественский "Грехи пользовательских историй", Analyst Days**](https://www.youtube.com/watch?v=S4yUgnmRa0Q)

Распространенные ошибки:
- безликость (не указано кто действующее лицо истории, "я как пользователь")
- неконкретность (хочу всё, чтобы делать всё)
- не указана мотивация (просто "я хочу", "я как покупатель хочу корзину покупок")
- мотивация не объясняет зачем, а описывает желание ("я как пользователю, хочу корзину покупок, чтобы смотреть, какие в ней товары")

[**Андрей Дятлов "Source Generator в действии", DotNext**](https://www.youtube.com/watch?v=6QWZds35rGs)

Если нужно большое количество специфичного boilerplate в коде, то можно использовать Source Generator на стороне Roslyn (но пока подобные сценарии не просматриваются)

[**Егор Богатов "Что нового в JIT-компиляторе", DotNext**](https://www.youtube.com/watch?v=Lkza7La1W4k)

Запуск приложения .NET 6 с флагами PGO может дать прирост в производительности 10-15% за счет увеличения времени "прогрева". [Подробности](https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/#jit)

[**Владимир Перепелица "Как правильно выбрать очередь", HighLoad**](https://www.youtube.com/watch?v=hEC8CX8Drac)

Доклад начального уровня. Новая информация: упрощенные очереди (ZeroMQ), которые быстры, но могут терять сообщения; облачные решения (SQS) сейчас не актуальны.

[**Андрей Смирнов "Анатомия веб-сервиса", HighLoad**](https://www.youtube.com/watch?v=KAWeC9evbGM)

Теоретические основы многозадачности (процессы, потоки, кооперативная многозадачность), реализации кооперативной многозадачности (обратные вызовы, green-thread). Примеры подключение PostgreSQL - процесс, MySQL - поток операционной системы, Redis - кооперативная многозадачность, nginx - комбинированный вариант потоки ОС + кооперативные потоки. PgBouncer - прокси-балансировщик для расположения перед БД PostgreSQL для экономии соединений (pipelining).

**Алексей Коновкин "API-Gateway - как не допустить хаоса при цифровой трансформации на примере телеком-оператора", Highload 2022 [non-public](https://conf.ontico.ru/videos/4380349)**

Компания Nexign на основе nginx разработала собственный API шлюз. Основные нефункциональные требования: горизонтальное масштабирование, распределенное кеширование сессий, распределенное отказоустойчивое хранилище реестра конфигураций, переживать полную или частичную потерю связи с реестром. В качестве кеша используется Redis; в качестве хранилища реестра - ZooKeeper; для маршрутизации используется базовый nginx и Lua. Для реализации маршрутизации и балансировки есть два подхода: с единым портом (удобно, когда делаем новый API) или с возможностью разделения по портам. Конфигурация nginx статична, изменение списка портов можно сделать только при перезагрузке приложения. Реализации авторизации: Basic (логин/пароль), JWT-токен, [opaque-токен](https://cloudentity.com/developers/basics/tokens/opaque-token/) (формат OpenID не привязан к JWT), [Authorization Code Flow](https://auth0.com/docs/get-started/authentication-and-authorization-flow/authorization-code-flow), Token Exchange. Трансформация запросов реализована за счет nginx и Lua-скриптов. Защита и квотирование: circuit breaker (переиспользован из nginx), throttling (использует две скользящих средних: отношение latency к количеству запросов), quoting (механизм определения политики квот и счетчики текущих условий).

**Юрий Печатнов "Exactly once передача данных без материализации", Highload 2022 [non-public](https://conf.ontico.ru/videos/4380313)**

Тривиальная схема потоковой обработки: данные -> решардеры (которые разделяют данные по ключу) -> промежуточные очереди -> агрегаторы (каждый отвечает за свою пачку включей) -> хранилище "ключ-значение". Минусы такой схемы: материализация промежуточной очереди. Если убрать промежуточную очередь, то теряется отказоустойчивость при отказах агрегаторов. Решение: промежуточная очередь используется только в случаях переполнения решардера, в иных случаях решардер работает напрямую с агрегатором. Для синхрозации прямого режима и промежуточной очереди используется идентификатор предыдущего сообщения.

**Александр Тоболь "Архитектура: история и будущее на примере Вконтакте", Highload Saint 2022 offline**

- Позиция архитектора не нужна (невозможно принимать решения о развитии системы в одиночку, только коллегиально)
- Разница в понятиях "архитектура" и "структура" (design): архитектура определяет воспроизводство структуры
- ["Гипотеза об устойчивости структуры" Мартина Фаулера](https://martinfowler.com/bliki/DesignStaminaHypothesis.html)
- [Закон Амдала о параллельных вычислениях](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%BA%D0%BE%D0%BD_%D0%90%D0%BC%D0%B4%D0%B0%D0%BB%D0%B0)
- Подход Engine VK - фактически это микросервис на С/С++ с embedded database
- VK использует свой бинарный протокол сериализации Type Language (по типу Protobuf)
- RPS взаимодействие переведено на TypeLanguage/RPC_UDP для экономии памяти буферов
- Причина ввода умной ленты? Большинство пользователей не успевали просмотреть свою календарную ленту (не все прошаренно постоянно удаляли всякий мусор из ленты)
- Раскладка горячего контента на 50 CDN, Geo-DNS работал плохо из-за постоянно меняющихся/падающих сервисов
- Если остановить сервер с uptime > 10 лет, то велика вероятность, что RAID умрет целиком
- *TODO: Протокол QUIC и оптимизации сжатия*
- *TODO: Поподробнее про NUMA*
- *TODO: Составить чек-лист для разработчика, когда задача уже готова*

**Дмитрий Завалишин "Языки программирования: прошлое, настоящее, будущее", Highload Saint 2022 offline**

- Конкуренция в мире - прежде всего конкуренция моделей управления
- Важнейший показатель IT-решения: Total Cost Of Ownership (полная стоимость владения)
- Во вреня оценки TCO затраты на начальную разработку составлять единицы процентов (<5%)
- Общая стоимость: разработка + поддержка в год * срок жизни + стоимость железа
- Почему живы "прожорливые" языки типа Python, PHP? Не всем нужны продуктовые кластеры из десятков ядер
- Стоимость разработки оптимальна в маленьких проектах на python, в больших - Java/.NET
- "В прикладной разработке программировать на С - грешно, на С++ - грешновато" (Завалишин)
- За JIT-компиляцией, использующей статистику всей среды исполнения будущее (см.доклад Богатова про PGO)
- *Рекомендация: Книга "Оптимизация С-кода под Эльбрус"* [pdf](http://www.mcst.ru/files/5ed39a/dd0cd8/50506b/000000/elbrus_prog_2020-05-30.pdf)
- *TODO: Как работает PhantomOS?*

**Олег Бартунов, Иван Панченко "Postgres от начала веков и до наших дней", Highload Saint 2022 offline**

- *Рекомендация: Статья Эдгара Кодда про реляционную модель* [pdf](https://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf)
- *Рекомендация: Книга Егора Рогова "Про внутренногости PostgreSQL"* [купить](https://dmkpress.com/catalog/computer/databases/978-5-93700-122-2/)

**Евгений Пак "Без А/В результат ХЗ", Highload Saint 2022 offline**

- *Рекомендация: Рой Кахави "Доверительное А/В-тестирование"* [купить](https://www.ozon.ru/product/doveritelnoe-a-v-testirovanie-224221240)
- Платформа для A/B-тестирования состоит из быстрого разделителя пользователей (500k RPS) и медленной асинхронной системой сбора статистики
- *TODO: etcd - key-value storage с функцией уведомления об изменениях*
- Будь осторожен, складывая важные бизнес данные в headers, ограничения в 4 Кб, используй кастомные кодирования/сериализации

**Михаил Кабищев "Одна платформа, чтобы править всеми", Highload Saint 2022 offline**

- Платформа нужна для снижения time-to-market (стандартизация, унификация инфраструктуры кода, решение типовых задач), платформа - технологический фундамент
- Конвенция по микросервисам (миниконституция): именование, версионирование, конфигурирование, протоколы, observability
- Конвенции по языкам/технологиям: версии языков, библиотек, code style, лучшие практики
- Создание сервисов через генераторы/шаблоны
- Конфигурирование и утилита доставки
- Где и как хранить контракты? Кто и как их генерирует? Для Go и gRPC утилиты Protogen (2020) и Mimir (2022) - обе пока не в open-source
- Managed Services (автоматическое разворачивание БД, Redis, Memcached)

**Филипп Дельгадо "Микросервисы через боль и превозмогание", Highload Saint 2022 offline**

- Минусы микросервисов: сложная аналитика, целостность, надежность, сложность
- Плюсы микросервисов: разнообразие подходов, людей, фреймворков; изоляция проблем и неопределенности; упрощение архитектурного надзора, маркетинг (модно!)
- *TODO: Что такое PCI DSS? Что-то связанное с карточными операциями*
- Теоретия систем - как разделить систему на подсистемы (вспомни уроки Системной инженерии)
- *Рекомендация: книги Ричарда Фейнмана*
- *Рекомендации: изучить ТФКП - Теорию функций комплексной переменной*
- Service-Mesh как решение сложной процедуры деплоя/канареечных релизов
- Канареечные релизы над очередями (в частности kafka) - всегда очень плохие решения
- Длинная транзакция (сага) в микросервисах порождает вопросы: Как понять, что возникла проблема? Кто должен это понять? Кто и как запускает компенсацию?
- Варианты саг: оркестрация с регистратором, хореография с регистратором (регистратор - god-like object), хореография без регистратора (весь контект операции прикрепляется к сообщению), оркестрация без регистрации
- Проблемы саг: не всегда есть компенсация, компенсировать все проблемы подряд - дорого, компенсация нужна для всего сценария, а не для шага
- Решение: не сага, а work-flow. Нет компенсации шага, но есть "негативный сценарий №Х"
- Инструменты для Work-flow: Cadence, Temporal, Camunda

**Дарья Петрова "Цифровизация бизнесов на базе Jira", Highload Saint 2022 offline**

- Процессы важнее инструментов, но если инструмент неудобен им пользоваться не будут
- Управление проекта внедрения делали в ToDoist, Trello, главный минус: нельзя переиспользовать наработки старого проекта в новом, без ретро-анализа
- Для построения процесса в Jira нужен отдельный ресурс (люди, команда), инструмент Jira Structure
- Потребность в нормальном управлении процессом есть у всех, но не все осознают, что Jira и борды помогут
- Большой плюс единства интерфейса (рабочие задачи и обслуживающие процессы: заказ пропусков, тех.саппорт, отпуска)
- CRM дороги, а Jira уже куплена (пример на 300 человек, разработка расширения Jira - 650 тыс, использование ZohoCRM - 100 тысяч в месяц)

**Алексей Плетнёв "Свой распределенный S3 на Minio: практический опыт по наступанию на грабли", Highload Saint 2022 offline**

- Выбор хранилища: AWS, GCP - не устраивают по latency; Yandex, VK - по цене; ceph, OpenIO - сложно
- MinIO не гарантирует, что все резервные копии окажутся на разных нодах
- Нельзя избежать downtime при обновлении/расширении кластера (все ноды обновляются разом)
- *TODO: Узнать подробнее про ZFC пулы*

[**Андрей Минкин "Путь в тимлиды и обратно", TeamLead Saint 2022**](https://www.youtube.com/watch?v=r22K8mU5_pA&t=3025s)

- *Рекомендация: Джоко Виллинг "Дисциплина - это свобода"*
- *Рекомендация: инструмент ["управленческое слабоумие"](https://habr.com/ru/company/oleg-bunin/blog/552116/)*
- Путь к CTO: как не растерять технические навыки? Ревью кода, архитектурные митинги и решения, исследование архитектур и дизайна систем, codewars, помочь кому-нибудь решить задачу, участие в сборе требований
- Запланировать со всеми 1-на-1 - регулярные встречи раз в месяц
- *TODO: что такое SWOT в Risk management?*

[**Виталий Леонов "Приборная панель тимлида. Как оцифровать все и спать спокойно", TeamLead Saint 2022**](https://youtu.be/r22K8mU5_pA?t=7121)

Тимлиду следует контролировать три сферы: техническое качество ПО, процессы разработки и команду. Наиболее полезные показатели качества ПО: стоимость инфраструктуры на пользователя (запрос), количество запросов в секунду, среднее время ответа, утилизацию ресурсов (CPU, RAM), количество ошибок в секунду. Метрики процесса разработки (почти все взяты из Скрама): burndown chart, velocity, bug cycle time (время жизни бага от обнаружения до устранения), четыре ключевых метрики (см. TechRadar: среднее время жизни задачи, частота релизов, среднее время восстановления, процент релизов с ошибками). Метрики команды наиболее сложные для измерения, для примера: воронка найма, скорость найма по длительности этапов, скорость онбоардинга (время до N-го MR), текучесть. В докладе описано много-много метрик, но нет практических советов как их собирать.
