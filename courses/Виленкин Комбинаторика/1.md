# Глава 1. Общие правила комбинаторики

## § 1-4

Правило суммы: если некоторый объект А можно выбрать m способами, а другой объект B можно выбрать n способами, то выбор "либо А, либо B" можно осуществить m+n способами.

Правило произведения: если объект А можно выбрать m способами и если после каждого такого выбора объект B можно выбрать n способами, то выбор пары (A; B) в указанном порядке можно осуществить mn способами.

Задачи:

1. Из двух спортивных обществ, насчитывающих по 100 фехтовальщиков каждое, надо выделить по одному фехтовальщику для учаситя в состязании. Скольки способами может быть сделан этот выбор? 100×100 = 10 000.
1. Из города А в город B ведут пять дорог, а из города B в город C - три. Сколько путей, проходящих через B, ведут из А в C? 15.
1. Имеется 5 видео конвертов без марок и 4 вида марок. Сколькими способами можно выбрать конверт с маркой для посылки письма? 20.
1. В группе из 16 детей 7 родились в Москве, 4 - в Санкт-Петербурге, 3 - в Киеве и 2 - в Минске. Сколькими способами можно выбрать из них 4 детей так, чтобы в группе были уроженцы всех 4 городов? 7×4×3×2 = 168.
1. Сколько букв, содержащих по пяти букв каждое, можно составить из 33 букв, если допускаются повторения, но никакие две соседние буквы не должны совпадать, т.е. такие слова как "пресс" или "ссора", не допускаются? 33×32×32×32×32 = 34 603 008
1. Сколькими способами можно выбрать гласную и согласную буквы из слова "здание"? А из слова "камзол"? 9 и 8.
1. Бросают игральную кость с 6 гранями и запускают волчок, имеющий 8 граней. Сколькими различными способами они могут упасть? 48.
1. На вершину горы ведут пять дорог. Сколькими способами турист может подняться в гору и потом спуститься с нее? Решите ту же задачу при дополнительном условии, что подъем и спуск происходят по разным дорогам. 25 и 20.
1. На ферме есть 20 овец и 24 свиньи (все разной упитанности). Сколькими способами можно выбрать одну овцу и одну свинью? Если такой выбор уже сделан, сколькими способами можно сделать его еще раз? 20×24 = 480 и 19×23 = 437.
1. На шахматную доску надо поставить короля и ферзя. Сколькими способами это можно сделать, если короля надо поставить на белое поле, а ферзя - на черное? А если на цвет полей нет ограничений? А если обе фигуры надо поставить на белые поля? 32×32 = 1 024, 64×63 = 4 032, 32×31 = 992.
1. Сколькими способами можно выбрать на шахматной доске белое и черное поля, не лежащие на одной горизонтали или одной вертикали? 32×(32-8) = 32×24 = 768.
1. Из 12 слов мужского рода, 9 женскгого и 10 среднего нужно выбрать по одному слову каждого рода. Сколькими способами может быть сделан этот выбор? 12×9×10 = 1 080.
1. Из 3 типов ручек, 7 типов карандашей и 7 типов ластиков надо выбрать ручку, карандаш и ластик. Сколькими способами это можно сделать? 3×7×7 = 147.
1. В букинистическом магазине лежат 6 разных изданий романа И.С.Тургенева "Рудин", 3 издания его же романа "Дворянское гнездо" и 4 издания романа "Отцы и дети". Кроме того, есть 5 разных сборников, в каждом из которых есть романы "Рудин" и "Дворянское гнездо", и 7 сборников с романами "Дворянское гнездо" и "Отцы и дети". Сколько способами можно соделать покупку, содержащую по одному экземпляру каждого из этих романов? А если в магазине есть еще 3 сборника, содержащие романы "Рудин" и "Отцы и дети", и 5 книг, содержащих все три романа? *Решение:* 5×4 + 6×7 + 6×3×4 = 134 (сначала комбинация сборник + одиночная книга, потом наборы из трех книг), 148.
1. В корзине лежат 12 яблок и 10 апельсинов. Ваня выбирает из нее яблоко или апельсин, после чего Надя берет и яблоки, и апельсин. В каком случае Надя имеет большую свободу выбора: если Ваня взял яблоко или если он взял апельсин? Яблоко (11×10 = 110 вариантов после взятия яблоко против 12×9 = 108 вариантов после взятия апельсина).
1. Имеются три волчка с 6, 8 и 10 гранями соответственно. Их одновременно запустили. Сколькими различными способами они могут упасть? Сколько среди них способов, при которых по крайней мере два волчка упали на сторону, помеченную цифрой 1? Всего 6×8×10 = 480 вариантов. С хотя бы двумя цифрами "1": 1 (все три "1") + 5 + 7 + 9 (два волчка на "1", третий - не на "1") = 22.
1. У англичан принято давать ребенку несколько имен. Сколькими способами в Англии можно назвать ребенка, если общее количество имен равно 300, а ему дают не более трех имен? Хватит ли этих наборов на всех англичан (57 млн. человек) или неприменно найдутся англичане с одинаковыми именами? 300 + 300×299 + 300×299×298 = 26 820 600, найдутся англичане с одинаковыми именами.
1. Сколько есть чисел от 0 до 999 999, в которых нет двух рядом стоящих одинаковых чисел? 1 + 9 + 9×9 + ... + 9×9×9×9×9×9 = 597 871.
1. Какое наибольшее число различных шаров можно построить в пространстве так, чтобы они касались трех данных плоскостей и данного шара? *Решение:* Я остался очень недоволен условием, количество шаров зависит от взаимной конфигурации плоскостей и шара. Аналогичную задачу на плоскости (построить окружности по заданным двум прямым и окружности) имеет три решения: 4 окружности, если точка пересечения заданных прямых лежит внутри заданной окружности; 2 окружности, если прямые пересекаются, но точка пересечения не лежит внутри заданной окружности; 0, если прямые параллельны.
1. Можно ли выписать девять чисел 1, 2, ..., 9 по кругу так, чтобы сумма никаких двух соседних чисел не делилась ни на 3, ни на 5, ни на 7? *Решение:* Да, можно. 629471385... Как прийти к решению? У 4 только два допустимых соседа - 7 и 9. У цифры 1 только два допустимых соседа - 3 и 7, а у цифры 2 - только 6 и 9, после чего получаем последовательность "6294713", распределеям оставшиеся 8 и 5.
1. В соревнованиях по хоккею участвовали пять команд: A, B, C, D, E. В конкурсе знатоков один участник предположил, что они займут места в порядке A, B, C, D, E, а другой предсказал порядок D, A, E, C, B. После окончания соревнований оказалось, что первый не угадал не только место хотя бы одной из команд, но даже какую-либо пару следующих друг за другом команд. Второй же угадал места двух команд и две пары следующих друг за другом команд. В каком порядке расположились команды? E, D, A, C, B. *Решение:* допустим, что второй угадал пару команд с точным указанием мест, а вторую пару - без указания мест. Пары с точным указаниям могут занимать только места 1 и 2 (т.е. D A) или 4 и 5 (т.е. C B на конце). Перебором пробуем варианты, проверяя из соответствие на то, что первый прогнозист не угадал ничего.
1. Квадрат разделен на 16 разных квадратов. Сколькими способами можно раскрасить их в белый, черный, красный и синий цвета так, чтобы в каждом горизонтальном и каждом вертикальном ряду были все четыре цвета? 576. *Решение:* мое первое решение было ошибочным, заполнял по строкам 24×6×2 = 288, без учета сложной картинки при заполнении третьего и четвертого рядов. Верное решение полностью расписано в "Ответах", страница 329 издания 2019 год.

## § 5-10

Размещение с повторением из n элементов по k: $\overline A^k_n = n^k$

Задачи:

23. Сколькими способами можно разложить в два кармана девять монет различного достоинства? $2^9 = 512$
24. Надо срочнот доставить 6 пакетов разным адресатам. Сколькими способами это можно сделать, если для передачи писем можно послать трех курьеров, и каждое письмо можно дать любому из курьеру? (Курьер сам решает, в каком порядке доставлять данные ему письма.) $3^6 = 729$
25. Четверо студентов сдают экзамен. Сколькими способами могут быть поставлены им отметки, если известно, что все студенты экзамен сдали (получив отметку 3, 4 или 5)? $3^4 = 81$
26. Из Лондона в Брайтон ведут 2 шоссе, соединенные 10 проселочным дорогами. Сколькими способами можно проехать из Лондона в Брайтон так, чтобы дорога не пересекала себя? $2^{11} = 2048$
27. Пусть при том же условии два путешественника выезжают из Лондона по разным шоссе так, что ни один участок шоссе они не проезжают в одном и том же направлении? $2^{10} = 1024$
28. Из Лондона в Кембридж ведут 3 шоссе, пересекаемые 4 проселочными дорогами. Сколькими способами можно совершить путешествие, если ни по одному участку шоссе не едут в направлении Лондона и ни один участок не проезжают дважды? $3^5 = 243$
29. Когда-то автомобильные номера состояли из одной, двух или трех букв и следующих за ними четырех цифр. Найдите число таких номеров, если использовались 32 буквы. $32^3*10^4 + 32^2*10^4 + 32*10^4$
30. В 2004 году в России давали автомобильные номера типа 77х451хо, в которых употреблялись цифры и кириллистические буквы, имеющие аналог в латинском алфавите (таких 12). Первые два элементы - цифры (код региона), затем идет буква, затем трехзначное число и под конец еще две буквы. а) Сколько таких автомобильных номеров могли выдать в России? б) На Москву были выделены коды региона 77, 97 и 99. Сколько номеров могли выдать в Москве? Есть нюанс, что "000" не используется для автомобильного номера (как и регион "00"): $99*12*999*(12)^2$, $3*12*999*(12)^2$
31. В некотором государстве не было двух жителей с одинаковым набором зубов. Какова может быть наибольшая численность населения этого государства (во рту человека может быть не более 32 зубов)? $2^{32}$
32. Сколько чисел, меньших миллиона, можно написать с помощью цифр: а) 8 и 9; б) 7, 8 и 9; в) 0, 8, 9 (с цифры 0 число начинаться не может)? а) $2^6 + 2^5 + 2^4 + 2^3 + 2^2 + 2$ б) $3^6 + 3^5 + 3^4 + 3^3 + 3^2 + 3$ в) $2(3^5 + 3^4 + 3^3 + 3^2 + 3)$
33. Трое юношей и две девушки выбирают себе место работы. В городе есть три завода, где требуются рабочие (туда берут лишь мужчин), два магазина, куда берут лишь женщин, и две фирмы, куда требуются и мужчины, и женщины. Сколькими способами они могут распределиться между этими предприятиями? $5^3*4^2$
34. Имеются три курицы, четыре утки и два гуся. Сколькими способами можно выбрать из них несколько птиц так, чтобы среди выбранных оказались и куры, и утки, и гуси? $(2^3-1)*(2^4-1)*(2^2-1)=315$
35. На перекрестке имеется m светофоров. Сколько может быть различных состояний этих светофооров, если каждый светофор (независимо от остальных) имеет три возможных состояния: 1) горит зеленый; 2) горит желтый; 3) горит красный? Решите ту же задачу, если допускаются всевозможные комбинации огней каждого светофора (например, горит одновременно зеленый и красный или ничего не горит). $3^m$, $8^m$.
36. Сколько можно составить из 32 букв шестибуквенных слов, содержащих хотя бы один раз букву "а"? $6*32^5$
37. В селении проживают 1000 жителей. Докажите, что по крайней мере двое из них имеют одинаковые инициалы. Если исключить буквы Ъ и Ь, то в русском языке 31 буква. $31^2 = 961 < 1000$.
38. Сколько существует семизначных телефонных номеров, в первых 3 цифрах которых не встречаются цифры 0 и 9? $8^3*10^4$

## § 11-15

39. Переплетчик должен переплести 12 различных книг в красный, зеленый и коричневый переплеты. Сколькими способами он может это сделать, если в каждый цвет должна быть переплетена хоть одна книга? Решение: найдем все возможные варианты переплета и вычтем из него "неправильные", в которых используются два или один цвет. Ответ: $3^{12} - 3*2^{12} + 3 = 519 156$
40. В отделе научно-исследовательского института работали несколько человек, причем каждый из них знает хотя бы один иностранный язык: 6 человек знают английский, 7 - французский, 6 - немецкий, 4 знают английский и немекций, 4 - немецкий и французский, 2 - французский и английский, 1 человек знает все три языка. Сколько человек работает в отделе? Сколько из них знает только английский язык? Только французский? Сколько человек знают ровно 1 язык? По формуле включений и исключений, всего 11 человек и т.д.
41. На загородную прогулку поехали 92 человека. Бутерброды с колбасой взяли 47 человек, с сыром - 38 человек, с ветчиной - 42 человека, с сыром и колбасой - 28 человек, с колбасой и ветчиной - 31 человек, с сыром и ветчиной - 26 человек. Все три вида бутербродов взяли с собой 25 человек, а остальные вместо бутербродов взяли пирожки. Сколько человек взяли с собой пирожки? 25 человек.
42. Сколько целых чисел от 0 до 999 не делится ни на 5, ни на 7? А сколько целых чисел от 0 до 999 не делятся ни на 2, ни на 3, ни на 5, ни на 7? 999 - (999 // 5) - (999 // 7) + (999 // 35) = 686. Аналогично, второй вопрос - 228.

## § 16-17

43. Во скольких девятизначных числах все цифры различны? 9×9×8×7×...×3×2 = 9×9! = 3 265 920
44. Каких чисел от 1 до 10 000 000 больше: тех, в записи которых встречается единица, или тех, в которых ее нет? Найдем количество чисел в нужном диапазоне, без единицы: $9^7 - 1$. Чисел с единицей: ${10}^7 - 9^7 + 1$. "Без единицы" чисел больше.
45. Через каждую из трех данных точек на плоскости проведем по m прямых так, чтобы среди них не было двух, параллельных между собой, и трех, пересекающихся в одной точке (за естественным исключением трех прямых одного пучка). Найдите число точек пересечения этих прямых (не считая трех данных). Решение: возьмем одну из точек, из нее проведено m прямых. Количество прямых, с которыми они пересекается: $2m$. Всего точек пересечения для "пучка" из одной точки:  $2m^2$. Всего точек три, каждая точка пересечения учтена два раза: $2m^2 * 3 / 2 = 3m^2$
46. Сколько шестизначных чисел содержат ровно три различных цифры? *Решение:* первой идеей было посчитать количество расстановок трех цифр по шести позициям, а затем вычитать дважды/трижды подсчитанные числа, но не стал проверять этот путь из-за сложностей с нулем, которые не мог заниматься лидирующие разряды. Рисовал в лоб дерево вариантов: на первой позиции может быть любое из девяти чисел (назовем его А), на втором позиции - число А (один вариант) или новое число B (9 вариантов) и так далее. У дерево получилось всего 10 листов, пришлось кропотливо посчитать итоговое количество чисел по каждому "листу" и сложить его - 58320. Заглядывал в "Ответы" с надеждой узнать более быстрое и просто решение - увы.

![Дерево вариантов](/courses/%D0%92%D0%B8%D0%BB%D0%B5%D0%BD%D0%BA%D0%B8%D0%BD%20%D0%9A%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B0%D1%82%D0%BE%D1%80%D0%B8%D0%BA%D0%B0/vilenkin1-46.drawio.png)

47. В составлении 40 задач принимало участие 30 студентов со всех пяти курсов. Любые два студента с одного курса придумали поровну задач, а любые два студента с разных курсов - разное количество задач. Сколько человек придумало одну задачу? *Решение:* Допустим, студенты с разных курсов придумали по 1, 2, 3, 4 и 5 задач соответственно. Аналогично, допустим, что студентов с курсов, которые придумали более одной задачи было по одному человеку. Тогда, количество студентов, которые придумали по одной задаче: 30 - 4 = 26. Количество придуманных задач: 40 - (2 + 3 + 4 + 5) = 26. Очевидно, что если "продуктивные" студенты придумали больше, чем 2-5 задач или их было больше четырех человек, количество задач не сойдется с количеством человек, решение единственное. *Ответ:* 26.

48. Сколько имеется шестизначных чисел, у которых сумма цифр четная? А если берут все числа от 1 до 999 999? *Решение:* Идея, что таких чисел должно быть половина витала в воздухе, но оформить доказательно у меня её не получилось. Стал считать явно, сколько существует шестизначных чисел, где все числа четные, 2 числа четные, 4 числа четные, все числа нечетные (они считают очень похоже, отличие только в вычитании случая с лидирующим нулем). Итог совпал с ожиданиями - числа деляться на "четная сумма/нечетная сумма" пополам. *Ответ:* 450 000, 499 999.

49. Сколько существует пятизначных чисел? Во скольких из них все цифры четны? Во скольких все цифры нечетны? Во сколько не входят цифры, меньшие шести? Во скольких нет цифр, больших трех? *Решение:* $90 000$, $4*{5}^4 = 2500$, $5*5^4=3125$, $4^5=1024$, $3*4^4=768$.  

50. Сколько и каких цифр понадобится, чтобы написать все числа от 1 до 999 999 включительно? А от 1 до ${10}^n - 1$ включительно?

51. Найдите сумму всех четырехзначных чисел, не делящихся ни на 2, ни на 3, ни на 5.

52. Сколько существует пятизначных четных чисел, в которых ни одна цифра не повторяется?

53. Сколько слов длины n из цифр 0 и 1 содержат четное число нулей?

54. От А до В 999 км. Вдоль дороги стоят километровые столбы, на которых написаны расстояния до А и до В: 0|999, 1|998, 2|997, ... , 998|1, 999|0. Сколько среди этих километровых столбов таких, на которые есть только две различные цифры?

55. Дана последовательно чисел 1, 2, 3, ..., 2n. Сколькими способами можно извлечь из неё три числа, из которых можно построить арифметическую прогрессию? То же самое для последовательности чисел 1, 2, 3, ... 2n + 1.

56. Найдите количество троек различных натуральных чисел, не превосходящих 100, из которые можно построить геометрическую прогрессию.

57. Окна дома, обращенные к морю, расположены в узлах прямоугольной сетки с m горизонталями (этажами) и n вертикалями. Сколько сигналов можно передать находящемуся в морю кораблю, освещая некоторые из окон дома, если в темноте нельзя различить положение освещенных окон относительно дома?

58. Имеется 14 пар различных предметов. Из них выбирается некоторое количество предметов. Найдите число способов это сделать (две выборки отличаются друг от друга своим составом, но не порядком предметов). А если имеется n пар?

59. Сколько различных четырехзначных чисел можно составить из цифр 0, 1, 2, 3, 4, 5, 6, если каждая из них может повторяться несколько раз?

60. У меня есть шесть друзей. За некоторые время каждый из них был у меня на обеде 7 раз, каждые двое встретились у меня на обеде 5 раз, каждые трое - 4 раза, каждые четверо - 3 раза, с каждыми пятью я обедал 2 раза, со всеми шестью - 1 раз, каждуй друг отсутствовал у меня на обеде 8 раз. Сколько раз я обедал один? Сколько было обедов за это время?

61. Сколько двухзначных чисел в сумме с числом, записынным теми же цифрами, но в обратном порядке, дает полный квадрат?

62. Из числа 12345678910111213...9899100 вычеркните 100 цифр так, чтобы оставшиеся число было а) наибольшим, б) наименьшим (записи, начинающиеся с нуля недопустимы)

63. Можно ли расставить 9 чисел 1, 2, 3, 4, 5, 6, 7, 8, 9 по кругу так, чтобы сумма любых трех числе подряд делались на 3 и была а) больше 9; б) больше 15?

64. Четыре числа сложили всеми возможными способами по два раза и получили следующие шесть сумм: 2, 4, 9, 9, 14, 16. Найдите эти числа.

